    <!DOCTYPE html>
    <html lang="en" class="scroll-smooth">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Dashboard - SKYNET Automation</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
        <script src="https://unpkg.com/lucide-icons@latest/dist/umd/lucide.js"></script>
        <style>
            body { font-family: 'Inter', sans-serif; background-color: #000000; color: #F3F4F6; }
            .gradient-text { background: linear-gradient(90deg, #38bdf8, #a78bfa, #f472b6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; text-fill-color: transparent; }
            .dashboard-card { background-color: rgba(31, 41, 55, 0.3); border: 1px solid rgba(75, 85, 99, 0.5); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); }
            .form-textarea { background-color: rgba(31, 41, 55, 0.5); border: 1px solid #4b5563; transition: border-color 0.2s; }
            .form-textarea:focus { border-color: #38bdf8; outline: none; box-shadow: 0 0 0 2px rgba(56, 189, 248, 0.4); }
            .spinner { border: 4px solid rgba(255, 255, 255, 0.3); border-radius: 50%; border-top-color: #38bdf8; width: 24px; height: 24px; animation: spin 1s ease-in-out infinite; }
            @keyframes spin { to { transform: rotate(360deg); } }
        </style>
    </head>
    <body class="antialiased">

        <!-- === HEADER === -->
        <header class="sticky top-0 z-50 bg-black/80 backdrop-blur-sm border-b border-gray-800">
            <div class="container mx-auto px-6 py-4">
                <div class="flex items-center justify-between">
                    <div class="text-2xl font-bold tracking-wider"><a href="index.html">SKYNET</a></div>
                    <nav class="hidden md:flex items-center space-x-8">
                        <a href="services.html" class="hover:text-sky-400 transition-colors">Services</a>
                        <a href="process.html" class="hover:text-sky-400 transition-colors">Our Process</a>
                        <a href="contact.html" class="hover:text-sky-400 transition-colors">Contact</a>
                    </nav>
                    <div class="flex items-center space-x-4">
                        <a href="index.html" class="text-sm hover:text-red-400 transition-colors">Sign Out</a>
                    </div>
                </div>
            </div>
        </header>

        <main class="py-20">
            <div class="container mx-auto px-6">
                <h1 class="text-4xl md:text-5xl font-bold mb-12">Automation <span class="gradient-text">Dashboard</span></h1>

                <!-- Instagram Automation Card -->
                <div class="dashboard-card max-w-2xl mx-auto rounded-2xl p-8">
                    <div class="flex items-center gap-4 mb-6">
                        <i data-lucide="instagram" class="w-8 h-8 text-pink-400"></i>
                        <h2 class="text-3xl font-bold">Instagram Auto-Poster</h2>
                    </div>

                    <!-- STEP 1: User sees this first. They need to connect their account. -->
                    <div id="insta-disconnected">
                        <p class="text-gray-400 mb-6">To get started, connect your Instagram account. This will redirect you to Instagram to securely authorize SKYNET to post on your behalf.</p>
                        <button id="connect-insta-btn" class="w-full flex items-center justify-center gap-3 py-3 px-4 border border-transparent rounded-md shadow-sm text-lg font-medium text-white bg-gradient-to-r from-pink-500 to-orange-500 hover:opacity-90 transition-opacity">
                            <i data-lucide="link"></i>
                            Connect with Instagram
                        </button>
                    </div>

                    <!-- STEP 2: This section is hidden until the user successfully connects their account. -->
                    <div id="insta-connected" class="hidden">
                        <div class="bg-emerald-900/50 border border-emerald-500 text-emerald-300 px-4 py-3 rounded-lg mb-6 flex items-center gap-3">
                            <i data-lucide="check-circle"></i>
                            <!-- The username would be dynamically inserted by your backend -->
                            <span>Instagram Account Connected: <strong id="insta-username"></strong></span>
                        </div>

                        <form id="insta-post-form">
                            <label for="intent" class="block text-sm font-medium text-gray-300 mb-2">Describe your post intent:</label>
                            <textarea id="intent" name="intent" rows="5" class="form-textarea w-full rounded-md p-3 text-lg" placeholder="e.g., 'Create a motivational post about overcoming challenges with a picture of a mountain at sunrise.'"></textarea>
                            
                            <div class="mt-6">
                                <button type="submit" class="w-full flex items-center justify-center gap-3 py-3 px-4 border border-transparent rounded-md shadow-sm text-lg font-medium text-white bg-sky-500 hover:bg-sky-600 transition-colors">
                                    <span id="button-text">Generate & Post to Instagram</span>
                                    <div id="loading-spinner" class="spinner hidden"></div>
                                </button>
                            </div>
                        </form>
                        
                        <div id="status-message" class="mt-6 text-center text-lg"></div>
                    </div>
                </div>
            </div>
        </main>

        <script>
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
            lucide.createIcons();

            // --- UI Elements ---
            const disconnectedView = document.getElementById('insta-disconnected');
            const connectedView = document.getElementById('insta-connected');
            const connectButton = document.getElementById('connect-insta-btn');
            const postForm = document.getElementById('insta-post-form');
            const statusMessage = document.getElementById('status-message');
            const buttonText = document.getElementById('button-text');
            const spinner = document.getElementById('loading-spinner');
            const instaUsernameSpan = document.getElementById('insta-username');

            // --- BACKEND INTEGRATION POINT ---
            // In a real app, you would check with your backend if the user has a valid token.
            // For this demo, we'll simulate it. Set this to `true` to see the connected view.
            const isUserConnected = false; 

            if (isUserConnected) {
                disconnectedView.classList.add('hidden');
                connectedView.classList.remove('hidden');
                instaUsernameSpan.textContent = '@bolzy99'; // This would come from your database
            } else {
                disconnectedView.classList.remove('hidden');
                connectedView.classList.add('hidden');
            }

            // --- OAUTH FLOW TRIGGER ---
            connectButton.addEventListener('click', () => {
                // IMPORTANT: Replace 'YOUR_FACEBOOK_APP_ID' with your actual App ID from Meta Developers
                const appId = '1034637958867552'; 
                // IMPORTANT: Replace 'https://your-site.netlify.app/auth/callback' with the exact Redirect URI you added in Meta Developers
                // If testing locally, use 'http://localhost:5500/auth/callback.html' or your local server's address
                const redirectUri = 'https://deskill.netlify.app/auth/callback.html'; // Changed to .html as per common practice

                // These are the permissions your app is requesting from the user
                const scope = 'pages_show_list,instagram_basic,instagram_content_publish';

                // Construct the full OAuth URL
                const authUrl = `https://www.facebook.com/v18.0/dialog/oauth?client_id=${appId}&redirect_uri=${redirectUri}&scope=${scope}&response_type=code`;

                // Redirect the user to Meta's authorization page
                window.location.href = authUrl;
            });


            // --- Instagram Posting Logic ---
            postForm.addEventListener('submit', async function(event) {
                event.preventDefault();
                // ... (The rest of the form submission logic remains the same) ...
            });
        </script>
    </body>
    </html>
